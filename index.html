<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>6í•™ë…„ ë¹…ë°œë¦¬ë³¼ ëŒ€íšŒ REDì¡° ìˆœìœ„í‘œ</title>
    <!-- Tailwind CSS CDN ë¡œë“œ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Firebase SDK ë¡œë“œ -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, setPersistence, browserLocalPersistence } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot, collection, getDocs, runTransaction, getDoc, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firestore ë¡œê¹… í™œì„±í™” (ë””ë²„ê¹…ìš©)
        setLogLevel('Debug');

        // =========================================================================================
        // ğŸš¨ ì¤‘ìš”: ê¹ƒí—ˆë¸Œ/ì™¸ë¶€ ì›¹ì‚¬ì´íŠ¸ì— ë°°í¬ ì‹œ ì•„ë˜ CONFIGë¥¼ Firebase Consoleì—ì„œ ë³µì‚¬í•˜ì—¬ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.
        // -----------------------------------------------------------------------------------------
        const MANUAL_FIREBASE_CONFIG = {
            apiKey: "AIzaSyBQaa-hL07PF8AHfSlkNpozyNkD_O4ezAQ", // ì‹¤ì œ í‚¤ë¡œ ë³€ê²½ í•„ìš”
            authDomain: "vicred-4a9c4.firebaseapp.com", // ì‹¤ì œ ë„ë©”ì¸ìœ¼ë¡œ ë³€ê²½ í•„ìš”
            projectId: "vicred-4a9c4", // ì‹¤ì œ í”„ë¡œì íŠ¸ IDë¡œ ë³€ê²½ í•„ìš” (ê°€ì¥ ì¤‘ìš”)
            storageBucket: "vicred-4a9c4.firebasestorage.app",
            messagingSenderId: "1080107763992",
            appId: "1:1080107763992:web:005bc7eeff68567890766d"
        };
        // =========================================================================================
        
        // Canvas í™˜ê²½ ë³€ìˆ˜ ë¡œë”©
        const canvasAppId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const canvasFirebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        // ìµœì¢… CONFIG ê²°ì •: Canvas í™˜ê²½ì´ ìš°ì„ í•˜ë©°, ì—†ìœ¼ë©´ ìˆ˜ë™ CONFIGë¥¼ ì‚¬ìš©
        const firebaseConfig = canvasFirebaseConfig || (MANUAL_FIREBASE_CONFIG.projectId !== "YOUR_PROJECT_ID" ? MANUAL_FIREBASE_CONFIG : null);
        const appId = canvasFirebaseConfig ? canvasAppId : (firebaseConfig?.projectId || 'default-app-id');

        // ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
        const ADMIN_PASSWORD = '2025dudtls!!'; 

        let db;
        let auth;
        let userId = null;
        let teamList = []; // ì‹¤ì‹œê°„ ë°ì´í„° ì €ì¥ì„ ìœ„í•œ ë°°ì—´

        // ì´ˆê¸° íŒ€ ë°ì´í„° ì •ì˜ (ìš”ì²­ì— ë”°ë¼ ì´ë¦„ ìˆ˜ì •)
        const INITIAL_TEAMS = [
            { id: 'team1', name: 'ì²´ìœ¡ ìµœê°•íŒ€ (6-5)', W: 0, L: 0, GP: 0, SW: 0, SL: 0, Points: 0, PrevRank: 0 },
            { id: 'team2', name: 'ë²„ë¦¬ëŠ” ì¹´ë“œ (6-3)', W: 0, L: 0, GP: 0, SW: 0, SL: 0, Points: 0, PrevRank: 0 },
            { id: 'team3', name: 'RISE (6-4)', W: 0, L: 0, GP: 0, SW: 0, SL: 0, Points: 0, PrevRank: 0 },
            { id: 'team4', name: 'ì„ ìƒë‹˜, ì´ê±° ì´ê¸°ë©´ ë¼ë©´íŒŒí‹°! (6-1)', W: 0, L: 0, GP: 0, SW: 0, SL: 0, Points: 0, PrevRank: 0 },
            { id: 'team5', name: 'ì¸í˜ì´ ì™€ìª„ì—¼ ì»´í¼ë‹ˆ (6-3)', W: 0, L: 0, GP: 0, SW: 0, SL: 0, Points: 0, PrevRank: 0 },
        ];
        
        // 1. Firebase ì´ˆê¸°í™” ë° ì¸ì¦
        const initializeFirebase = async () => {
            if (!firebaseConfig) {
                console.error("Firebase Configuration is missing. Please update MANUAL_FIREBASE_CONFIG for external hosting.");
                return;
            }

            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);

            try {
                if (initialAuthToken) {
                    await setPersistence(auth, browserLocalPersistence);
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    // ì™¸ë¶€ ë°°í¬ ì‹œ ìµëª… ì¸ì¦ì„ ì‚¬ìš©
                    await signInAnonymously(auth);
                }
            } catch (error) {
                console.error("Firebase Auth Error:", error);
            }
        };

        // 2. ìˆœìœ„ ê³„ì‚° ë¡œì§ (ì •ë ¬ ê¸°ì¤€)
        const calculateRanks = (teams) => {
            const calculatedTeams = teams.map(team => ({
                ...team,
                SetDiff: team.SW - team.SL
            }));

            calculatedTeams.sort((a, b) => {
                // 1. ìŠ¹ì  (Points) ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ
                if (b.Points !== a.Points) return b.Points - a.Points;
                // 2. ìŠ¹ë¦¬ íšŸìˆ˜ (W) ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ
                if (b.W !== a.W) return b.W - a.W;
                // 3. ë“ì‹¤ ì„¸íŠ¸ì°¨ (SetDiff) ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ
                return b.SetDiff - a.SetDiff;
            });

            return calculatedTeams.map((team, index) => {
                const currentRank = index + 1;
                let rankChange = 0;

                if (team.PrevRank !== 0) {
                    if (currentRank < team.PrevRank) {
                        rankChange = 1;
                    } else if (currentRank > team.PrevRank) {
                        rankChange = -1;
                    }
                }
                
                team.PrevRank = currentRank;
                return { ...team, Rank: currentRank, RankChange: rankChange };
            });
        };

        // 3. ìˆœìœ„í‘œ UI ë Œë”ë§
        const renderTable = (teams) => {
            const tableBody = document.getElementById('ranking-body');
            if (!tableBody) return;

            teamList = calculateRanks(teams);
            
            tableBody.innerHTML = teamList.map(team => {
                const rankChangeIcon = (change) => {
                    if (change === 1) return `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto"><path d="M12 19V5"/><path d="m5 12 7-7 7 7"/></svg>`;
                    if (change === -1) return `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto"><path d="M12 5v14"/><path d="m19 12-7 7-7-7"/></svg>`;
                    return `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto text-gray-400"><path d="M5 12h14"/></svg>`;
                };
                
                const rankChangeColor = (change) => {
                    if (change === 1) return 'text-green-500';
                    if (change === -1) return 'text-red-500';
                    return 'text-gray-500';
                };

                // 1ìœ„ íŒ€ ë°°ê²½ìƒ‰ê³¼ í…ìŠ¤íŠ¸ ìƒ‰ìƒ ë³€ê²½ (Red í…Œë§ˆ)
                const isFirst = team.Rank === 1 ? 'bg-red-50 font-bold' : 'font-medium';

                return `
                    <tr class="hover:bg-red-50 transition duration-150 ease-in-out">
                        <td class="py-4 px-2 text-center text-sm ${isFirst} text-gray-900">${team.Rank}</td>
                        <td class="py-4 px-4 whitespace-nowrap text-left text-sm font-semibold ${isFirst.includes('bold') ? 'text-red-700' : 'text-gray-700'} team-cell">
                            ${team.name}
                        </td>
                        <td class="py-4 px-2 text-center text-sm text-gray-700">${team.GP}</td>
                        <td class="py-4 px-2 text-center text-sm text-green-600 font-semibold">${team.W}</td>
                        <td class="py-4 px-2 text-center text-sm text-red-600 font-semibold">${team.L}</td>
                        <td class="py-4 px-2 text-center text-sm text-gray-700 hide-on-mobile">${team.SW}-${team.SL} (${team.SetDiff > 0 ? '+' : ''}${team.SetDiff})</td>
                        <td class="py-4 px-2 text-center text-sm font-bold text-red-700">${team.Points}</td>
                        <td class="py-4 px-2 text-center text-lg ${rankChangeColor(team.RankChange)}">
                            ${rankChangeIcon(team.RankChange)}
                        </td>
                    </tr>
                `;
            }).join('');
            
            updateTeamSelects();
        };

        // 4. Firestoreì—ì„œ ë°ì´í„° ë¡œë“œ (ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ)
        const loadData = (uid) => {
            const teamCollectionRef = collection(db, `artifacts/${appId}/users/${uid}/teams`);

            onSnapshot(teamCollectionRef, (snapshot) => {
                const teams = [];
                snapshot.forEach((doc) => {
                    teams.push(doc.data());
                });

                if (teams.length > 0) {
                    renderTable(teams);
                } else {
                    initializeTeams(uid);
                }
            }, (error) => {
                console.error("Error listening to Firestore:", error);
            });
        };

        // 5. ì´ˆê¸° íŒ€ ë°ì´í„° ì„¤ì •
        const initializeTeams = async (uid) => {
            const teamCollectionRef = collection(db, `artifacts/${appId}/users/${uid}/teams`);
            
            const snapshot = await getDocs(teamCollectionRef);
            if (snapshot.size === 0) {
                for (const team of INITIAL_TEAMS) {
                    const teamDocRef = doc(teamCollectionRef, team.id);
                    await setDoc(teamDocRef, team);
                }
            }
        };

        // 6. ê²½ê¸° ê²°ê³¼ ê¸°ë¡
        const recordMatch = async (winnerId, loserId, winSets, loseSets) => {
            const winnerRef = doc(db, `artifacts/${appId}/users/${userId}/teams/${winnerId}`);
            const loserRef = doc(db, `artifacts/${appId}/users/${userId}/teams/${loserId}`);
            
            try {
                await runTransaction(db, async (transaction) => {
                    const winnerDoc = await transaction.get(winnerRef);
                    const loserDoc = await transaction.get(loserRef);

                    if (!winnerDoc.exists() || !loserDoc.exists()) {
                        throw "íŒ€ ë°ì´í„°ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤!";
                    }

                    const newWinnerData = {
                        ...winnerDoc.data(),
                        GP: winnerDoc.data().GP + 1,
                        W: winnerDoc.data().W + 1,
                        Points: winnerDoc.data().Points + 3,
                        SW: winnerDoc.data().SW + winSets,
                        SL: winnerDoc.data().SL + loseSets,
                    };
                    transaction.update(winnerRef, newWinnerData);

                    const newLoserData = {
                        ...loserDoc.data(),
                        GP: loserDoc.data().GP + 1,
                        L: loserDoc.data().L + 1,
                        Points: loserDoc.data().Points + 0,
                        SW: loserDoc.data().SW + loseSets,
                        SL: loserDoc.data().SL + winSets,
                    };
                    transaction.update(loserRef, newLoserData);
                });
                showMessage('ê²½ê¸° ê²°ê³¼ê°€ ì„±ê³µì ìœ¼ë¡œ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            } catch (error) {
                console.error("Transaction failed: ", error);
                showMessage(`ê²½ê¸° ê¸°ë¡ ì‹¤íŒ¨: ${error}`, 'error');
            }
            // ê²½ê¸° ê¸°ë¡ í›„ ëª¨ë‹¬ ë‹«ê¸°
            closeMatchEntryModal();
        };

        // 7. ëª¨ë‹¬ ê´€ë ¨ í•¨ìˆ˜

        // ìƒˆ í•¨ìˆ˜: ê²½ê¸° ì…ë ¥ ëª¨ë‹¬ ì—´ê¸°
        const openMatchEntryModal = () => {
            document.getElementById('match-entry-modal').classList.remove('hidden');
        };

        // ìƒˆ í•¨ìˆ˜: ê²½ê¸° ì…ë ¥ ëª¨ë‹¬ ë‹«ê¸°
        const closeMatchEntryModal = () => {
            document.getElementById('match-entry-modal').classList.add('hidden');
            document.getElementById('match-form').reset();
            document.getElementById('error-message').textContent = '';
        };

        // ìƒˆ í•¨ìˆ˜: ë¹„ë°€ë²ˆí˜¸ ëª¨ë‹¬ ì—´ê¸°
        const openPasswordModal = () => {
            document.getElementById('password-modal').classList.remove('hidden');
            // ì´ì „ ì…ë ¥/ì˜¤ë¥˜ ì´ˆê¸°í™”
            document.getElementById('password-input').value = '';
            document.getElementById('password-error-message').textContent = '';
        };

        // ìƒˆ í•¨ìˆ˜: ë¹„ë°€ë²ˆí˜¸ ëª¨ë‹¬ ë‹«ê¸°
        const closePasswordModal = () => {
            document.getElementById('password-modal').classList.add('hidden');
        };

        // ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì²˜ë¦¬
        const handlePasswordSubmit = (event) => {
            event.preventDefault();
            const input = document.getElementById('password-input').value;
            const errorMessage = document.getElementById('password-error-message');

            if (input === ADMIN_PASSWORD) {
                closePasswordModal();
                openMatchEntryModal(); // ë¹„ë°€ë²ˆí˜¸ê°€ ë§ìœ¼ë©´ ê²½ê¸° ì…ë ¥ ëª¨ë‹¬ ì—´ê¸°
            } else {
                errorMessage.textContent = 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
            }
        };

        const updateTeamSelects = () => {
            const teamOptions = teamList.map(team => `<option value="${team.id}">${team.name}</option>`).join('');
            document.getElementById('team-a').innerHTML = teamOptions;
            document.getElementById('team-b').innerHTML = teamOptions;
        };

        const handleFormSubmit = (event) => {
            event.preventDefault();
            const teamAId = document.getElementById('team-a').value;
            const teamBId = document.getElementById('team-b').value;
            const scoreA = parseInt(document.getElementById('score-a').value);
            const scoreB = parseInt(document.getElementById('score-b').value);
            const errorMessage = document.getElementById('error-message');

            if (teamAId === teamBId) {
                errorMessage.textContent = 'ë‘ íŒ€ì€ ì„œë¡œ ë‹¤ë¥¸ íŒ€ì´ì–´ì•¼ í•©ë‹ˆë‹¤.';
                return;
            }
            if (isNaN(scoreA) || isNaN(scoreB) || scoreA < 0 || scoreB < 0) {
                errorMessage.textContent = 'ìœ íš¨í•œ ì„¸íŠ¸ ìŠ¤ì½”ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                return;
            }
            if (scoreA === scoreB) {
                errorMessage.textContent = 'ìŠ¹íŒ¨ê°€ í™•ì‹¤í•´ì•¼ í•©ë‹ˆë‹¤ (ë¬´ìŠ¹ë¶€ ë¶ˆê°€).';
                return;
            }

            let winnerId, loserId, winSets, loseSets;
            if (scoreA > scoreB) {
                winnerId = teamAId;
                loserId = teamBId;
                winSets = scoreA;
                loseSets = scoreB;
            } else {
                winnerId = teamBId;
                loserId = teamAId;
                winSets = scoreB;
                loseSets = scoreA;
            }

            recordMatch(winnerId, loserId, winSets, loseSets);
        };

        const showMessage = (text, type) => {
            const messageBox = document.getElementById('message-box');
            messageBox.textContent = text;
            messageBox.classList.remove('hidden', 'bg-red-100', 'text-red-800', 'bg-green-100', 'text-green-800');
            
            if (type === 'success') {
                messageBox.classList.add('bg-green-100', 'text-green-800');
            } else if (type === 'error') {
                messageBox.classList.add('bg-red-100', 'text-red-800');
            }

            setTimeout(() => {
                messageBox.classList.add('hidden');
            }, 3000);
        };

        window.onload = async () => {
            await initializeFirebase();
            
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    userId = user.uid;
                    document.getElementById('user-id-display').textContent = userId;
                    loadData(userId);
                } else {
                    userId = crypto.randomUUID();
                    document.getElementById('user-id-display').textContent = "ì¸ì¦ ëŒ€ê¸° ì¤‘...";
                }
                
                // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—…ë°ì´íŠ¸ (ë¹„ë°€ë²ˆí˜¸ ëª¨ë‹¬ì„ ì—´ë„ë¡ ë³€ê²½)
                document.getElementById('open-modal-btn').addEventListener('click', openPasswordModal);
                
                // ë¹„ë°€ë²ˆí˜¸ ëª¨ë‹¬ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
                document.getElementById('close-password-modal-btn').addEventListener('click', closePasswordModal);
                document.getElementById('password-form').addEventListener('submit', handlePasswordSubmit);

                // ê²½ê¸° ì…ë ¥ ëª¨ë‹¬ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
                document.getElementById('close-match-entry-modal-btn').addEventListener('click', closeMatchEntryModal);
                document.getElementById('match-form').addEventListener('submit', handleFormSubmit);
            });
        };

        // ì „ì—­ í•¨ìˆ˜ë¡œ ë…¸ì¶œ
        window.openPasswordModal = openPasswordModal;
        window.closePasswordModal = closePasswordModal;
        window.openMatchEntryModal = openMatchEntryModal;
        window.closeMatchEntryModal = closeMatchEntryModal;
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fef2f2; /* ë°°ê²½ë„ ì•„ì£¼ ì—°í•œ ë¶‰ì€ë¹› */
        }
        .header-cell {
            width: 10%;
        }
        .team-cell {
            width: 30%;
        }
        @media (max-width: 640px) {
            .hide-on-mobile {
                display: none;
            }
        }
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.6);
        }
    </style>
</head>
<body class="p-4 sm:p-8 min-h-screen flex items-start justify-center">

    <div id="message-box" class="fixed top-4 right-4 z-50 p-3 rounded-lg shadow-lg hidden transition duration-300"></div>

    <!-- REDì¡° í…Œë§ˆ: ring-red-200 -->
    <div class="w-full max-w-4xl bg-white shadow-2xl rounded-2xl overflow-hidden ring-4 ring-red-200">
        
        <!-- í—¤ë” ì„¹ì…˜: bg-red-700 -->
        <header class="p-6 bg-red-700 text-white flex justify-between items-center">
            <div>
                <div class="flex items-end space-x-3 mb-1">
                    <h1 class="text-3xl font-extrabold tracking-tight">
                        ğŸ 6í•™ë…„ ë¹…ë°œë¦¬ë³¼ ëŒ€íšŒ REDì¡° ìˆœìœ„í‘œ
                    </h1>
                    <!-- BLUEì¡° ì´ë™ ë§í¬: text-red-200 -->
                    <a href="#" class="text-sm font-medium text-red-200 hover:text-white transition duration-200 underline whitespace-nowrap">
                        (BLUEì¡° ìˆœìœ„í‘œë¡œ ì´ë™)
                    </a>
                </div>
                <p class="mt-1 text-red-200">
                    5ê°œ íŒ€ (ë¦¬ê·¸ì „) ìµœì¢… ìˆœìœ„ í˜„í™©
                </p>
            </div>
            <!-- ê²½ê¸° ì…ë ¥ ë²„íŠ¼: text-red-700, hover:bg-red-50 -->
            <button id="open-modal-btn" class="bg-white text-red-700 hover:bg-red-50 font-bold py-2 px-4 rounded-full shadow-md transition duration-200 flex items-center space-x-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14"/><path d="M5 12h14"/></svg>
                <span>ê²½ê¸° ê²°ê³¼ ì…ë ¥</span>
            </button>
        </header>

        <div class="px-6 pt-3 pb-1 text-xs text-gray-500 bg-gray-50 border-b">
            <span class="font-semibold">í˜„ì¬ ì‚¬ìš©ì ID (ê°œë³„ ë°ì´í„° ê³µê°„):</span> 
            <span id="user-id-display" class="font-mono text-gray-700 break-all">ë¡œë”© ì¤‘...</span>
        </div>

        <div class="p-4 sm:p-6">
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="py-3 px-2 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider rounded-tl-xl w-[5%]">ìˆœìœ„</th>
                            <th scope="col" class="py-3 px-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider team-cell">íŒ€ëª…</th>
                            <th scope="col" class="py-3 px-2 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider header-cell">ê²½ê¸°</th>
                            <th scope="col" class="py-3 px-2 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider header-cell">ìŠ¹</th>
                            <th scope="col" class="py-3 px-2 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider header-cell">íŒ¨</th>
                            <th scope="col" class="py-3 px-2 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider header-cell hide-on-mobile">ë“ì‹¤ ì„¸íŠ¸</th>
                            <th scope="col" class="py-3 px-2 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider header-cell">ì ìˆ˜</th>
                            <th scope="col" class="py-3 px-2 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider rounded-tr-xl w-[5%]">ìˆœë³€ë™</th>
                        </tr>
                    </thead>
                    <tbody id="ranking-body" class="bg-white divide-y divide-gray-200">
                        <tr><td colspan="8" class="text-center py-8 text-gray-400">ë°ì´í„° ë¡œë”© ì¤‘...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <footer class="p-6 bg-gray-50 border-t border-gray-200 text-sm text-gray-600 rounded-b-2xl">
            <p class="font-bold mb-1">ìˆœìœ„ ì‚°ì • ê¸°ì¤€:</p>
            <ul class="list-disc list-inside space-y-0.5">
                <li>ìŠ¹ë¦¬ íŒ€ì—ê²Œ ìŠ¹ì  3ì , íŒ¨ë°° íŒ€ì—ê²Œ 0ì  ë¶€ì—¬.</li>
                <li>ìˆœìœ„ ê²°ì • ìš°ì„  ìˆœìœ„: 1. ìŠ¹ì  &gt; 2. ìŠ¹ë¦¬ íšŸìˆ˜ &gt; 3. ë“ì‹¤ ì„¸íŠ¸.</li>
                <li>ìˆœë³€ë™ì€ í˜„ì¬ ìˆœìœ„ì™€ ì´ì „ ìˆœìœ„ ë¹„êµë¥¼ í†µí•´ ì‹¤ì‹œê°„ìœ¼ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.</li>
            </ul>
        </footer>
    </div>

    <!-- 1. ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ëª¨ë‹¬ (Password Modal) -->
    <div id="password-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden modal-backdrop">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-sm p-6 sm:p-8 transform transition-all duration-300 scale-95 opacity-0" 
             style="animation: modal-in 0.3s ease-out forwards;">
            <style>@keyframes modal-in { to { opacity: 1; scale: 1; } }</style>
            
            <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2 text-red-700">ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ í™•ì¸</h2>
            <p class="text-sm text-gray-600 mb-6">ê²½ê¸° ê²°ê³¼ë¥¼ ì…ë ¥í•˜ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
            
            <form id="password-form">
                <div class="space-y-4">
                    <div>
                        <input type="password" id="password-input" name="password" placeholder="ë¹„ë°€ë²ˆí˜¸" required 
                               class="w-full p-3 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 shadow-sm transition">
                    </div>
                </div>

                <p id="password-error-message" class="text-red-500 text-sm mt-4"></p>

                <div class="mt-6 flex justify-end space-x-3">
                    <button type="button" id="close-password-modal-btn" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-full hover:bg-gray-300 transition">
                        ì·¨ì†Œ
                    </button>
                    <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-full hover:bg-red-700 shadow-md transition">
                        í™•ì¸
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- 2. ê²½ê¸° ê²°ê³¼ ì…ë ¥ ëª¨ë‹¬ (Match Entry Modal, ID ë³€ê²½) -->
    <div id="match-entry-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden modal-backdrop">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 sm:p-8 transform transition-all duration-300 scale-95 opacity-0" 
             style="animation: modal-in 0.3s ease-out forwards;">
            <style>@keyframes modal-in { to { opacity: 1; scale: 1; } }</style>
            
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-2">ê²½ê¸° ê²°ê³¼ ê¸°ë¡</h2>
            
            <form id="match-form">
                <div class="space-y-4">
                    <div class="flex items-center space-x-4">
                        <label for="team-a" class="w-1/4 text-sm font-medium text-gray-700">íŒ€ A</label>
                        <select id="team-a" name="team-a" class="flex-1 p-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 shadow-sm transition">
                        </select>
                        <input type="number" id="score-a" name="score-a" placeholder="ì„¸íŠ¸" min="0" required class="w-20 p-2 border border-gray-300 rounded-lg text-center shadow-sm">
                    </div>

                    <div class="text-center text-xl font-bold text-red-600">
                        VS
                    </div>

                    <div class="flex items-center space-x-4">
                        <label for="team-b" class="w-1/4 text-sm font-medium text-gray-700">íŒ€ B</label>
                        <select id="team-b" name="team-b" class="flex-1 p-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 shadow-sm transition">
                        </select>
                        <input type="number" id="score-b" name="score-b" placeholder="ì„¸íŠ¸" min="0" required class="w-20 p-2 border border-gray-300 rounded-lg text-center shadow-sm">
                    </div>
                </div>

                <p id="error-message" class="text-red-500 text-sm mt-4"></p>

                <div class="mt-8 flex justify-end space-x-3">
                    <!-- ID ë³€ê²½ -->
                    <button type="button" id="close-match-entry-modal-btn" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-full hover:bg-gray-300 transition">
                        ì·¨ì†Œ
                    </button>
                    <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-full hover:bg-red-700 shadow-md transition">
                        ê²°ê³¼ ê¸°ë¡
                    </button>
                </div>
            </form>
        </div>
    </div>

</body>
</html>
